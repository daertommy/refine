"use strict";(self.webpackChunkdocumentation=self.webpackChunkdocumentation||[]).push([[85030],{3905:(e,t,n)=>{n.d(t,{Zo:()=>u,kt:()=>m});var r=n(67294);function o(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function a(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function i(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?a(Object(n),!0).forEach((function(t){o(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):a(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function s(e,t){if(null==e)return{};var n,r,o=function(e,t){if(null==e)return{};var n,r,o={},a=Object.keys(e);for(r=0;r<a.length;r++)n=a[r],t.indexOf(n)>=0||(o[n]=e[n]);return o}(e,t);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);for(r=0;r<a.length;r++)n=a[r],t.indexOf(n)>=0||Object.prototype.propertyIsEnumerable.call(e,n)&&(o[n]=e[n])}return o}var l=r.createContext({}),c=function(e){var t=r.useContext(l),n=t;return e&&(n="function"==typeof e?e(t):i(i({},t),e)),n},u=function(e){var t=c(e.components);return r.createElement(l.Provider,{value:t},e.children)},p={inlineCode:"code",wrapper:function(e){var t=e.children;return r.createElement(r.Fragment,{},t)}},d=r.forwardRef((function(e,t){var n=e.components,o=e.mdxType,a=e.originalType,l=e.parentName,u=s(e,["components","mdxType","originalType","parentName"]),d=c(n),m=o,f=d["".concat(l,".").concat(m)]||d[m]||p[m]||a;return n?r.createElement(f,i(i({ref:t},u),{},{components:n})):r.createElement(f,i({ref:t},u))}));function m(e,t){var n=arguments,o=t&&t.mdxType;if("string"==typeof e||o){var a=n.length,i=new Array(a);i[0]=d;var s={};for(var l in t)hasOwnProperty.call(t,l)&&(s[l]=t[l]);s.originalType=e,s.mdxType="string"==typeof e?e:o,i[1]=s;for(var c=2;c<a;c++)i[c]=n[c];return r.createElement.apply(null,i)}return r.createElement.apply(null,n)}d.displayName="MDXCreateElement"},30697:(e,t,n)=>{n.d(t,{x:()=>v});var r=n(86010),o=n(67294),a=n(73808),i=n(96319),s=n(79526);function l(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}const c=({onClick:e})=>o.createElement(i.z,{className:(0,r.Z)(),onClick:e,title:"Report Issue"},o.createElement(u,null)),u=e=>o.createElement("svg",function(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{},r=Object.keys(n);"function"==typeof Object.getOwnPropertySymbols&&(r=r.concat(Object.getOwnPropertySymbols(n).filter((function(e){return Object.getOwnPropertyDescriptor(n,e).enumerable})))),r.forEach((function(t){l(e,t,n[t])}))}return e}({xmlns:"http://www.w3.org/2000/svg",width:16,height:16,viewBox:"0 0 512 512"},e),o.createElement("title",null,"Report issue"),o.createElement("path",{fill:"none",stroke:"currentColor",strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:32,d:"M370 378c28.89 23.52 46 46.07 46 86m-274-86c-28.89 23.52-46 46.06-46 86m288-256c28.89-23.52 32-56.07 32-96m-288 94c-28.89-23.52-32-54.06-32-94m368 176.13h-80m-256 0H48M256 192v256"}),o.createElement("path",{fill:"none",stroke:"currentColor",strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:32,d:"M256 448h0c-70.4 0-128-57.6-128-128v-96.07c0-65.07 57.6-96 128-96h0c70.4 0 128 25.6 128 96V320c0 70.4-57.6 128-128 128z"}),o.createElement("path",{fill:"none",stroke:"currentColor",strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:32,d:"M179.43 143.52a49.08 49.08 0 0 1-3.43-15.73A80 80 0 0 1 255.79 48h.42A80 80 0 0 1 336 127.79a41.91 41.91 0 0 1-3.12 14.3"})),p=({visible:e,onClose:t})=>o.createElement("div",{className:(0,r.Z)("absolute","left-0","top-0","right-0","bottom-0",!e&&"opacity-0",e&&"opacity-100",!e&&"pointer-events-none",!e&&"w-0",!e&&"!h-0",!e&&"overflow-hidden",e&&"w-full",e&&"h-full","bg-gray-200","bg-opacity-10","backdrop-blur-sm","p-8","z-[4]")},o.createElement("div",{className:(0,r.Z)("absolute","left-1/2","top-1/2","max-w-sm","w-full","-translate-x-1/2","-translate-y-1/2","rounded","bg-gray-0","shadow-md","p-4","border","border-gray-100")},o.createElement("form",{className:(0,r.Z)("flex","flex-col","gap-4"),onSubmit:e=>{e.preventDefault();const n=new FormData(e.currentTarget).get("email");console.log(n),t()}},o.createElement("div",{className:(0,r.Z)("text-gray-500","text-xs")},"Thank you for reporting this issue! We'll fix it as soon as possible. If you want to get notified when it's fixed, let us email you!"),o.createElement("input",{name:"email",type:"email",placeholder:"Your email address",className:(0,r.Z)("placeholder:text-gray-300","text-gray-700","py-2","px-2","rounded","border","border-gray-100","focus:outline-none","focus:ring","focus:ring-gray-50")}),o.createElement("div",{className:(0,r.Z)("flex","items-center","justify-between")},o.createElement("button",{type:"button",className:(0,r.Z)("py-2","px-3","rounded","transition-all","duration-200","ease-in-out","bg-transparent","hover:bg-gray-100","focus:bg-gray-100","text-gray-500"),onClick:()=>t()},"Cancel"),o.createElement("button",{type:"submit",className:(0,r.Z)("py-2","px-3","rounded","transition-all","duration-200","ease-in-out","text-gray-0","bg-refine-blue","hover:brightness-110","focus:brightness-75")},"Get Notified!"))))),d=({horizontalSize:e,onMouseDown:t})=>o.createElement("div",{className:(0,r.Z)("resize-handler","hidden","md:block","absolute","z-[3]","top-0","bottom-0","w-2.5","cursor-ew-resize"),"data-direction":"horizontal",onMouseDown:t,style:{left:`calc(${e}% - 5px)`}});function m(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function f(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{},r=Object.keys(n);"function"==typeof Object.getOwnPropertySymbols&&(r=r.concat(Object.getOwnPropertySymbols(n).filter((function(e){return Object.getOwnPropertyDescriptor(n,e).enumerable})))),r.forEach((function(t){m(e,t,n[t])}))}return e}function h(e,t){return t=null!=t?t:{},Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(t)):function(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}(Object(t)).forEach((function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(t,n))})),e}function g(e,t){if(null==e)return{};var n,r,o=function(e,t){if(null==e)return{};var n,r,o={},a=Object.keys(e);for(r=0;r<a.length;r++)n=a[r],t.indexOf(n)>=0||(o[n]=e[n]);return o}(e,t);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);for(r=0;r<a.length;r++)n=a[r],t.indexOf(n)>=0||Object.prototype.propertyIsEnumerable.call(e,n)&&(o[n]=e[n])}return o}const v=e=>{var t;return"nextjs"===(null===(t=e)||void 0===t?void 0:t.template)?o.createElement(y,e):o.createElement(b,e)},b=e=>{var t,n,l,u,m,v,b,y,k,w,C,x,N,O,P,{startRoute:E,showNavigator:j,initialPercentage:A=50,dependencies:R,options:z={showTabs:!0,initMode:"lazy",classes:{"sp-cm":"p-0 bg-transparent"}},template:S="react-ts",customSetup:D,files:I,previewOnly:T,layout:B,height:L=420,wrapperClassName:M,className:U,showFiles:H=!1,showConsole:Z=!1,hidePreview:F=!1}=e,W=g(e,["startRoute","showNavigator","initialPercentage","dependencies","options","template","customSetup","files","previewOnly","layout","height","wrapperClassName","className","showFiles","showConsole","hidePreview"]);const{colorMode:$}=(0,s.I)();var G,q;null!=z||(z={}),null!==(G=(O=z).resizablePanels)&&void 0!==G||(O.resizablePanels=!0),null!==(q=(P=z).editorWidthPercentage)&&void 0!==q||(P.editorWidthPercentage=null!=A?A:50);const X={showTabs:z.showTabs,showLineNumbers:z.showLineNumbers,showInlineErrors:z.showInlineErrors,wrapContent:z.wrapContent,closableTabs:z.closableTabs,initMode:z.initMode,extensions:null===(t=z.codeEditor)||void 0===t?void 0:t.extensions,extensionsKeymap:null===(n=z.codeEditor)||void 0===n?void 0:n.extensionsKeymap,readOnly:z.readOnly,showReadOnly:z.showReadOnly,additionalLanguages:null===(l=z.codeEditor)||void 0===l?void 0:l.additionalLanguages},K={activeFile:z.activeFile,visibleFiles:z.visibleFiles,recompileMode:z.recompileMode,recompileDelay:z.recompileDelay,autorun:z.autorun,autoReload:z.autoReload,bundlerURL:z.bundlerURL,startRoute:z.startRoute,skipEval:z.skipEval,fileResolver:z.fileResolver,initMode:z.initMode,initModeObserverOptions:z.initModeObserverOptions,externalResources:z.externalResources,logLevel:z.logLevel,classes:z.classes},[V,Y]=o.useState(!1),{onHandleMouseDown:_,horizontalSize:J}=(({initialSize:e=50})=>{const[t,n]=o.useState(e),r=o.useRef(null),a=e=>{if(!r.current)return;const t=r.current.parentElement;if(!t)return;const{left:o,width:a}=t.getBoundingClientRect(),i=(e.clientX-o)/a*100,s=Math.min(Math.max(i,25),75);n(s),t.querySelectorAll(".sp-stack").forEach((e=>{e.style.pointerEvents="none"}))},i=()=>{var e;const t=null===(e=r.current)||void 0===e?void 0:e.parentElement;t&&(t.querySelectorAll(".sp-stack").forEach((e=>{e.style.pointerEvents=""})),r.current=null)};return o.useEffect((()=>(document.body.addEventListener("mousemove",a),document.body.addEventListener("mouseup",i),()=>{document.body.removeEventListener("mousemove",a),document.body.removeEventListener("mouseup",i)})),[]),{horizontalSize:t,onHandleMouseDown:o.useCallback((e=>{r.current=e.target}),[])}})({initialSize:z.editorWidthPercentage}),Q=!T&&!(null===(m=B)||void 0===m||null===(u=m.includes)||void 0===u?void 0:u.call(m,"col"));var ee,te,ne,re,oe,ae;return o.createElement(o.Fragment,null,o.createElement("div",{className:(0,r.Z)("pb-6",M)},o.createElement("div",{className:(0,r.Z)("absolute","left-0","right-0","w-full","px-2","md:px-4","xl:px-6","max-w-screen-xl","mx-auto",U)},o.createElement(i.oT,f({key:S,customSetup:f({dependencies:R},D),files:I,options:K,template:S,theme:"light"===$?h(f({},i.dN),{colors:h(f({},i.dN.colors),{surface1:"#F4F8FB",surface2:"rgb(222, 229, 237)",surface3:"rgb(222, 229, 237)"})}):h(f({},a.I2),{colors:h(f({},a.I2.colors),{surface1:"#1D1E30",surface2:"#303450",surface3:"#303450"})}),className:(0,r.Z)("not-prose sandpack-container","max-w-screen-xl")},W),o.createElement(i.sp,{className:(0,r.Z)("col"===B&&"!flex-col","col-reverse"===B&&"!flex-col-reverse")},H&&o.createElement(i.Lj,{autoHiddenFiles:!0,style:{height:null!==(ee=z.editorHeight)&&void 0!==ee?ee:L}}),!T&&o.createElement(i._V,h(f({},X),{initMode:"lazy",style:h(f({height:null!==(te=z.editorHeight)&&void 0!==te?te:L},(null===(b=B)||void 0===b||null===(v=b.includes)||void 0===v?void 0:v.call(b,"col"))?{flex:"initial"}:{flexGrow:J,flexShrink:J,flexBasis:0}),{overflow:"hidden"})})),Z?o.createElement(i.Tq,{style:h(f({height:null!==(ne=z.editorHeight)&&void 0!==ne?ne:L},(null===(k=B)||void 0===k||null===(y=k.includes)||void 0===y?void 0:y.call(k,"col"))?{flex:"initial"}:{flexGrow:J,flexShrink:J,flexBasis:0}),{overflow:"hidden"})}):null,Q?o.createElement(d,{onMouseDown:_,horizontalSize:J}):null,o.createElement(i.Gj,{actionsChildren:o.createElement(c,{onClick:()=>Y(!0)}),startRoute:E,showNavigator:null!=j?j:z.showNavigator,showRefreshButton:z.showRefreshButton,style:h(f({display:F?"none":"flex"},(null===(C=B)||void 0===C||null===(w=C.includes)||void 0===w?void 0:w.call(C,"col"))?{flex:"initial",width:"100%"}:{flexGrow:100-J,flexShrink:100-J,flexBasis:0,width:T?"100%":100-J+"%"}),{gap:0,height:null!==(re=z.editorHeight)&&void 0!==re?re:L})},o.createElement("div",{className:"sp-custom-loading"},o.createElement("img",{src:"https://refine.ams3.cdn.digitaloceanspaces.com/website/static/assets/spinner.gif",className:(0,r.Z)("w-12","h-12","rounded-full")}))),o.createElement(p,{visible:V,onClose:()=>Y(!1)})))),o.createElement("div",{className:(0,r.Z)(""),style:{height:Number(null!==(oe=z.editorHeight)&&void 0!==oe?oe:L)+2}}),o.createElement("div",{className:(0,r.Z)((null===(N=B)||void 0===N||null===(x=N.includes)||void 0===x?void 0:x.call(N,"col"))?"block":"block md:hidden"),style:{height:Number(null!==(ae=z.editorHeight)&&void 0!==ae?ae:L)+2}})),o.createElement("section",{className:"hidden max-w-0 max-h-0"},o.createElement("p",null,`Dependencies: ${Object.keys(null!=R?R:{}).map((e=>`${e}@${R[e]}`))}`),o.createElement("h3",null,"Code Files"),Object.keys(null!=I?I:{}).map((e=>o.createElement("div",{key:e},o.createElement("div",null,`File: ${e}`),o.createElement("div",null,`Content: ${"code"in I[e]?I[e].code:I[e]}`))))))},y=e=>{const t={hidePreview:!0};return o.createElement(b,h(f({},e,t),{template:"react-ts"}))};'\nimport { NavigateToResource } from "@refinedev/nextjs-router";\n\nconst Home = () => {\n    return <NavigateToResource resource="products" />;\n};\n\nexport default Home;\n'.trim()},99542:(e,t,n)=>{n.r(t),n.d(t,{assets:()=>v,contentTitle:()=>h,default:()=>k,frontMatter:()=>f,metadata:()=>g,toc:()=>b});var r=n(67294),o=n(3905),a=n(30697);function i(){return r.createElement(a.x,{showNavigator:!0,dependencies:{"@refinedev/core":"latest","@refinedev/simple-rest":"latest","@refinedev/react-router-v6":"latest","react-router-dom":"latest","react-router":"latest"},startRoute:"/payments/1",files:{"/App.tsx":{code:l,hidden:!0},"/style.css":{code:c,hidden:!0},"/access-control.ts":{code:s,active:!0},"/show.tsx":{code:u}}})}const s='\nimport { AccessControlProvider } from "@refinedev/core";\n\nconst role = "editor";\n// Uncomment this line and refresh to see difference.\n// const role = "admin";\n\nexport const accessControlProvider: AccessControlProvider = {\n  can: async ({ action, resource, params }) => {\n    console.log(action, resource, params);\n\n    if (\n      role === "admin" &&\n      ["field", "refund", "approve"].includes(action)\n    ) {\n      return {\n        can: true,\n      };\n    }\n\n    return {\n      can: false,\n      reason: "Unauthorized",\n    };\n  },\n};\n'.trim(),l='\nimport React from "react";\n\nimport { Refine } from "@refinedev/core";\nimport routerProvider from "@refinedev/react-router-v6";\nimport dataProvider from "@refinedev/simple-rest";\nimport { BrowserRouter, Route, Routes } from "react-router-dom";\n\nimport "./style.css";\n\nimport { accessControlProvider } from "./access-control.ts";\nimport { PaymentShow } from "./show.tsx";\n\nexport default function App() {\n  return (\n    <BrowserRouter>\n      <Refine\n      accessControlProvider={accessControlProvider}\n        routerProvider={routerProvider}\n        dataProvider={dataProvider("https://api.fake-rest.refine.dev")}\n        resources={[\n          {\n            name: "payments",\n            show: "/payments/:id",\n          },\n        ]}\n      >\n        <Routes>\n          <Route path="/payments/:id" element={<PaymentShow />} />\n        </Routes>\n      </Refine>\n    </BrowserRouter>\n  );\n}\n'.trim(),c="\nhtml {\n    margin: 0;\n    padding: 0;\n}\nbody {\n    margin: 0;\n    padding: 12px;\n}\n* {\n    box-sizing: border-box;\n}\nbody {\n    font-family: sans-serif;\n}\nform label, form input, form button {\n    display: block;\n    width: 100%;\n    margin-bottom: 6px;\n}\nspan + button {\n    margin-left: 6px;\n}\nul > li {\n    margin-bottom: 6px;\n}\n".trim(),u='\nimport { CanAccess, useCan } from "@refinedev/core";\n\nexport const PaymentShow: React.FC = () => {\n  const { data } = useCan({\n    resource: "payments",\n    action: "refund",\n    params: { id: 1 },\n  });\n\n  return (\n    <>\n      <h1>Payment Details</h1>\n      <p>\n        <b>ID</b>: <span>1</span>\n      </p>\n      <p>\n        <b>Amount</b>: <span>$100</span>\n      </p>\n      <p>\n        <b>Transaction ID</b>:\n        <span>\n          <CanAccess\n            resource="payments"\n            action="field"\n            params={{ field: "transactionId" }}\n            fallback={<>This field is only visible to admin users.</>}\n          >\n            <span>123456789</span>\n          </CanAccess>\n        </span>\n      </p>\n      <button disabled={!data?.can}>\n        {data?.can ? "Refund" : data?.reason}\n      </button>\n    </>\n  );\n};\n'.trim();function p(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function d(e,t){return t=null!=t?t:{},Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(t)):function(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}(Object(t)).forEach((function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(t,n))})),e}function m(e,t){if(null==e)return{};var n,r,o=function(e,t){if(null==e)return{};var n,r,o={},a=Object.keys(e);for(r=0;r<a.length;r++)n=a[r],t.indexOf(n)>=0||(o[n]=e[n]);return o}(e,t);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);for(r=0;r<a.length;r++)n=a[r],t.indexOf(n)>=0||Object.prototype.propertyIsEnumerable.call(e,n)&&(o[n]=e[n])}return o}const f={title:"Authorization"},h=void 0,g={unversionedId:"guides-concepts/authorization/index",id:"guides-concepts/authorization/index",title:"Authorization",description:"Authorization is a key aspect of security and user experience in web applications. Whether you are building a complex enterprise-level application or a simple CRUD interface, Refine's authorization system provides the necessary infrastructure to protect your resources and ensure that users interact with your application in a secure and controlled manner.",source:"@site/docs/guides-concepts/authorization/index.md",sourceDirName:"guides-concepts/authorization",slug:"/guides-concepts/authorization/",permalink:"/docs/guides-concepts/authorization/",draft:!1,editUrl:"https://github.com/refinedev/refine/tree/master/documentation/docs/guides-concepts/authorization/index.md",tags:[],version:"current",lastUpdatedBy:"Necati \xd6zmen",lastUpdatedAt:1700932703,formattedLastUpdatedAt:"Nov 25, 2023",frontMatter:{title:"Authorization"},sidebar:"someSidebar",previous:{title:"Authentication",permalink:"/docs/guides-concepts/authentication/"},next:{title:"UI Libraries",permalink:"/docs/guides-concepts/ui-libraries/"}},v={},b=[{value:"Access Control Provider",id:"access-control-provider",level:2},{value:"CanAccess Component",id:"canaccess-component",level:2},{value:"Router Integrations",id:"router-integrations",level:3},{value:"useCan Hook",id:"usecan-hook",level:2},{value:"Handling Authorization",id:"handling-authorization",level:2},{value:"UI Integrations",id:"ui-integrations",level:2},{value:"Sider",id:"sider",level:3},{value:"Buttons",id:"buttons",level:3}],y={toc:b};function k(e){var{components:t}=e,n=m(e,["components"]);return(0,o.kt)("wrapper",d(function(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{},r=Object.keys(n);"function"==typeof Object.getOwnPropertySymbols&&(r=r.concat(Object.getOwnPropertySymbols(n).filter((function(e){return Object.getOwnPropertyDescriptor(n,e).enumerable})))),r.forEach((function(t){p(e,t,n[t])}))}return e}({},y,n),{components:t,mdxType:"MDXLayout"}),(0,o.kt)("p",null,"Authorization is a key aspect of security and user experience in web applications. Whether you are building a complex ",(0,o.kt)("strong",{parentName:"p"},"enterprise-level")," application or a simple CRUD interface, ",(0,o.kt)("strong",{parentName:"p"},"Refine"),"'s authorization system provides the necessary infrastructure to protect your resources and ensure that users interact with your application in a secure and controlled manner."),(0,o.kt)("p",null,"refine's ",(0,o.kt)("strong",{parentName:"p"},"flexible architecture")," allows you to easily implement various authorization strategies:"),(0,o.kt)("ul",null,(0,o.kt)("li",{parentName:"ul"},"Role-Based Access Control (",(0,o.kt)("strong",{parentName:"li"},"RBAC"),")"),(0,o.kt)("li",{parentName:"ul"},"Attribute-Based Access Control (",(0,o.kt)("strong",{parentName:"li"},"ABAC"),")"),(0,o.kt)("li",{parentName:"ul"},"Access Control List (",(0,o.kt)("strong",{parentName:"li"},"ACL"),")")),(0,o.kt)("p",null,"With ",(0,o.kt)("strong",{parentName:"p"},"any")," authorization solution. (i.e. ",(0,o.kt)("a",{parentName:"p",href:"https://help.okta.com/wf/en-us/content/topics/workflows/connector-reference/okta/overviews/authorization.htm"},"Okta"),", ",(0,o.kt)("a",{parentName:"p",href:"https://casbin.org/"},"Casbin"),", ",(0,o.kt)("a",{parentName:"p",href:"https://cerbos.dev"},"Cerbos"),", or more)"),(0,o.kt)("p",null,"Refine offers several features to help you implement authorization in your application:"),(0,o.kt)("ul",null,(0,o.kt)("li",{parentName:"ul"},(0,o.kt)("inlineCode",{parentName:"li"},"<CanAccess />")," component: Conditionally renders child components based on the user's access to a resource."),(0,o.kt)("li",{parentName:"ul"},(0,o.kt)("inlineCode",{parentName:"li"},"useCan")," hook: Returns a value indicating whether the user has access to a resource based on the given parameters."),(0,o.kt)("li",{parentName:"ul"},(0,o.kt)("strong",{parentName:"li"},"UI Integrations"),": Conditionally renders UI elements such as ",(0,o.kt)("strong",{parentName:"li"},"buttons"),", ",(0,o.kt)("strong",{parentName:"li"},"menu items"),", etc. based on the user's access to a resource.")),(0,o.kt)("p",null,"In order to enable these features, Refine uses the ",(0,o.kt)("strong",{parentName:"p"},"Access Control Provider")," as an interface to connect your application with your authorization solution and provides necessary parameters to make access control decisions."),(0,o.kt)("h2",{id:"access-control-provider"},"Access Control Provider"),(0,o.kt)("p",null,"The ",(0,o.kt)("strong",{parentName:"p"},"Access Control Provider")," is an object that contains a ",(0,o.kt)("inlineCode",{parentName:"p"},"can")," method. This method is called by ",(0,o.kt)("strong",{parentName:"p"},"Refine")," to understand if the user can see a certain resource or perform an action."),(0,o.kt)("p",null,"A basic ",(0,o.kt)("strong",{parentName:"p"},"Access Control Provider")," looks like this:"),(0,o.kt)("pre",null,(0,o.kt)("code",{parentName:"pre",className:"language-tsx",metastring:'title="access-control-provider.ts"',title:'"access-control-provider.ts"'},'import { AccessControlProvider } from "@refinedev/core";\n\nexport const accessControlProvider: AccessControlProvider = {\n  can: async ({ resource, action, params }) => {\n    console.log(resource); // products, orders, etc.\n    console.log(action); // list, edit, delete, etc.\n    console.log(params); // { id: 1 }, { id: 2 }, etc.\n\n    if (meetSomeCondition) {\n      return { can: true };\n    }\n\n    return {\n      can: false,\n      reason: "Unauthorized",\n    };\n  },\n};\n')),(0,o.kt)("p",null,"And can be passed to ",(0,o.kt)("inlineCode",{parentName:"p"},"<Refine />")," component's ",(0,o.kt)("inlineCode",{parentName:"p"},"accessControlProvider")," prop:"),(0,o.kt)("pre",null,(0,o.kt)("code",{parentName:"pre",className:"language-tsx",metastring:'title="app.tsx"',title:'"app.tsx"'},'import { Refine } from "@refinedev/core";\n\nimport { accessControlProvider } from "./access-control-provider";\n\nexport const App = () => {\n  return (\n    <Refine\n      // highlight-next-line\n      accessControlProvider={accessControlProvider}\n    >\n      {/* ... */}\n    </Refine>\n  );\n};\n')),(0,o.kt)("p",null,(0,o.kt)("a",{parentName:"p",href:"/docs/api-reference/core/providers/accessControl-provider"},"To learn more about the ",(0,o.kt)("inlineCode",{parentName:"a"},"Access Control Provider"),", check out the reference page.")),(0,o.kt)("h2",{id:"canaccess-component"},"CanAccess Component"),(0,o.kt)("p",null,"The ",(0,o.kt)("inlineCode",{parentName:"p"},"CanAccess")," component can be used to wrap your ",(0,o.kt)("strong",{parentName:"p"},"pages")," or ",(0,o.kt)("strong",{parentName:"p"},"components")," to hide them from unauthorized users."),(0,o.kt)("p",null,"It calls ",(0,o.kt)("strong",{parentName:"p"},"Access Control Provider"),"'s ",(0,o.kt)("inlineCode",{parentName:"p"},"can")," method and conditionally renders its children based on the result."),(0,o.kt)("p",null,"Here's a basic example of how to use the ",(0,o.kt)("inlineCode",{parentName:"p"},"CanAccess")," component:"),(0,o.kt)("pre",null,(0,o.kt)("code",{parentName:"pre",className:"language-tsx",metastring:'title="list-page.tsx"',title:'"list-page.tsx"'},'import { CanAccess } from "@refinedev/core";\n\nexport const ListPage = () => {\n  return (\n    <CanAccess resource="products" action="list" fallback={<h1>You are not authorized to see this page.</h1>}>\n      <>\n        <h1>Products</h1>\n        <CanAccess resource="products" action="show" params={{ id: 1 }}>\n          <Button>See Details</Button>\n        </CanAccess>\n      </>\n    </CanAccess>\n  );\n};\n')),(0,o.kt)("p",null,(0,o.kt)("a",{parentName:"p",href:"/docs/api-reference/core/components/accessControl/can-access"},"To learn more about the ",(0,o.kt)("inlineCode",{parentName:"a"},"CanAccess")," component, check out the reference page.")),(0,o.kt)("h3",{id:"router-integrations"},"Router Integrations"),(0,o.kt)("p",null,(0,o.kt)("strong",{parentName:"p"},"Refine"),"'s router integrations can infer ",(0,o.kt)("inlineCode",{parentName:"p"},"resource"),", ",(0,o.kt)("inlineCode",{parentName:"p"},"action"),", and ",(0,o.kt)("inlineCode",{parentName:"p"},"params.id")," props from the current route and pass them to the ",(0,o.kt)("inlineCode",{parentName:"p"},"<CanAccess />")," component."),(0,o.kt)("p",null,"This means you can wrap all of your routes with a single ",(0,o.kt)("inlineCode",{parentName:"p"},"<CanAccess />")," component, instead of wrapping each page individually."),(0,o.kt)("p",null,"See ",(0,o.kt)("a",{parentName:"p",href:"/docs/packages/documentation/routers/react-router-v6"},"React Router"),", ",(0,o.kt)("a",{parentName:"p",href:"/docs/packages/documentation/routers/nextjs"},"Next.js"),", ",(0,o.kt)("a",{parentName:"p",href:"/docs/packages/documentation/routers/remix"},"Remix")," integration pages for more information."),(0,o.kt)("h2",{id:"usecan-hook"},"useCan Hook"),(0,o.kt)("p",null,"The ",(0,o.kt)("inlineCode",{parentName:"p"},"useCan")," hook can be used to check if the user has access to a resource or action."),(0,o.kt)("p",null,"It calls ",(0,o.kt)("strong",{parentName:"p"},"Access Control Provider"),"'s ",(0,o.kt)("inlineCode",{parentName:"p"},"can")," method and returns a value indicating whether the user has access to the resource or action."),(0,o.kt)("p",null,"Here's a basic example of how to use the ",(0,o.kt)("inlineCode",{parentName:"p"},"useCan")," hook:"),(0,o.kt)("pre",null,(0,o.kt)("code",{parentName:"pre",className:"language-tsx",metastring:'title="list-page.tsx"',title:'"list-page.tsx"'},'import { useCan } from "@refinedev/core";\n\nexport const ListPage = () => {\n  const { data } = useCan({\n    resource: "products",\n    action: "show",\n    params: { id: 1 },\n  });\n\n  return (\n    <>\n      <h1>Products</h1>\n      {data?.can && <Button>See Details</Button>}\n    </>\n  );\n};\n')),(0,o.kt)("p",null,(0,o.kt)("a",{parentName:"p",href:"/docs/api-reference/core/hooks/accessControl/useCan"},"To learn more about the ",(0,o.kt)("inlineCode",{parentName:"a"},"useCan")," hook, check out the reference page.")),(0,o.kt)("h2",{id:"handling-authorization"},"Handling Authorization"),(0,o.kt)(i,{mdxType:"AccessControlExample"}),(0,o.kt)("h2",{id:"ui-integrations"},"UI Integrations"),(0,o.kt)("p",null,"When Access Control Provider is provided, ",(0,o.kt)("strong",{parentName:"p"},"Refine"),"'s UI Integrations automatically manages the ",(0,o.kt)("strong",{parentName:"p"},"visibility")," of their components like ",(0,o.kt)("strong",{parentName:"p"},"buttons")," and ",(0,o.kt)("strong",{parentName:"p"},"menu items"),", simplifying the management of UI."),(0,o.kt)("p",null,"These UI Integrations uses the Access Control Provider to check if a user has the necessary permissions. This check is performed without requiring manual implementation for each component, streamlining the development process."),(0,o.kt)("h3",{id:"sider"},"Sider"),(0,o.kt)("p",null,"Sider component's ",(0,o.kt)("strong",{parentName:"p"},"menu items")," will ",(0,o.kt)("strong",{parentName:"p"},"automatically hidden")," if user don't have access."),(0,o.kt)("p",null,"Let's assume we have ",(0,o.kt)("strong",{parentName:"p"},"products")," resource."),(0,o.kt)("p",null,"Menu item of this resource will call ",(0,o.kt)("inlineCode",{parentName:"p"},"can")," method with following parameters:"),(0,o.kt)("pre",null,(0,o.kt)("code",{parentName:"pre"},'{ resource: "products", action: "list" }\n')),(0,o.kt)("p",null,"And if user isn't allowed to ",(0,o.kt)("inlineCode",{parentName:"p"},"list")," products, menu item will be hidden."),(0,o.kt)("h3",{id:"buttons"},"Buttons"),(0,o.kt)("p",null,"If you are using one of our buttons from our UI Integrations in your application, you don't need to wrap it with ",(0,o.kt)("inlineCode",{parentName:"p"},"<CanAccess />")," or use ",(0,o.kt)("inlineCode",{parentName:"p"},"useCan")," every time. These buttons will automatically be shown or hidden."),(0,o.kt)("pre",null,(0,o.kt)("code",{parentName:"pre",className:"language-tsx",metastring:"title=button-example.ts",title:"button-example.ts"},'// Following buttons call `can` method with commented parameters.\nimport {\n  CreateButton, //  { resource: "products", action: "create", params: { resource }}\n  ListButton, //    { resource: "products", action: "list" , params: { resource }}\n  EditButton, //    { resource: "products", action: "edit", params: { id: 1, resource } }\n  ShowButton, //    { resource: "products", action: "show", params: { id: 1, resource } }\n  DeleteButton, //  { resource: "products", action: "delete", params: { id: 1, resource } }\n  CloneButton, //   { resource: "products", action: "clone", params: { id: 1, resource } }\n} from "@refinedev/antd"; // or @refinedev/chakra-ui, @refinedev/mui, @refinedev/mantine\n')))}k.isMDXComponent=!0}}]);