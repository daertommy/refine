"use strict";(self.webpackChunkdocumentation=self.webpackChunkdocumentation||[]).push([[75935],{3905:(e,t,n)=>{n.d(t,{Zo:()=>c,kt:()=>u});var r=n(67294);function a(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function i(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function o(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?i(Object(n),!0).forEach((function(t){a(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):i(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function s(e,t){if(null==e)return{};var n,r,a=function(e,t){if(null==e)return{};var n,r,a={},i=Object.keys(e);for(r=0;r<i.length;r++)n=i[r],t.indexOf(n)>=0||(a[n]=e[n]);return a}(e,t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(r=0;r<i.length;r++)n=i[r],t.indexOf(n)>=0||Object.prototype.propertyIsEnumerable.call(e,n)&&(a[n]=e[n])}return a}var p=r.createContext({}),l=function(e){var t=r.useContext(p),n=t;return e&&(n="function"==typeof e?e(t):o(o({},t),e)),n},c=function(e){var t=l(e.components);return r.createElement(p.Provider,{value:t},e.children)},d={inlineCode:"code",wrapper:function(e){var t=e.children;return r.createElement(r.Fragment,{},t)}},m=r.forwardRef((function(e,t){var n=e.components,a=e.mdxType,i=e.originalType,p=e.parentName,c=s(e,["components","mdxType","originalType","parentName"]),m=l(n),u=a,g=m["".concat(p,".").concat(u)]||m[u]||d[u]||i;return n?r.createElement(g,o(o({ref:t},c),{},{components:n})):r.createElement(g,o({ref:t},c))}));function u(e,t){var n=arguments,a=t&&t.mdxType;if("string"==typeof e||a){var i=n.length,o=new Array(i);o[0]=m;var s={};for(var p in t)hasOwnProperty.call(t,p)&&(s[p]=t[p]);s.originalType=e,s.mdxType="string"==typeof e?e:a,o[1]=s;for(var l=2;l<i;l++)o[l]=n[l];return r.createElement.apply(null,o)}return r.createElement.apply(null,n)}m.displayName="MDXCreateElement"},7086:(e,t,n)=>{n.r(t),n.d(t,{assets:()=>c,contentTitle:()=>p,default:()=>u,frontMatter:()=>s,metadata:()=>l,toc:()=>d});n(67294);var r=n(3905);function a(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function i(e,t){return t=null!=t?t:{},Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(t)):function(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}(Object(t)).forEach((function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(t,n))})),e}function o(e,t){if(null==e)return{};var n,r,a=function(e,t){if(null==e)return{};var n,r,a={},i=Object.keys(e);for(r=0;r<i.length;r++)n=i[r],t.indexOf(n)>=0||(a[n]=e[n]);return a}(e,t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(r=0;r<i.length;r++)n=i[r],t.indexOf(n)>=0||Object.prototype.propertyIsEnumerable.call(e,n)&&(a[n]=e[n])}return a}const s={title:"Next.js E-commerce App with Strapi and Chakra UI",description:"Learn the power of Refine for e-commerce with this quick & easy example. This step-by-step Refine SPA tutorial will get you started in no time.",slug:"handcrafted-nextjs-e-commerce-app-tutorial-strapi-chakra-ui",authors:"melih",tags:["refine","strapi","chakra-ui","nextjs"],image:"https://refine.ams3.cdn.digitaloceanspaces.com/website/static/img/placeholder.png",hide_table_of_contents:!1},p=void 0,l={permalink:"/blog/handcrafted-nextjs-e-commerce-app-tutorial-strapi-chakra-ui",source:"@site/blog/2022-02-14-refine-ecommerce-blog.md",title:"Next.js E-commerce App with Strapi and Chakra UI",description:"Learn the power of Refine for e-commerce with this quick & easy example. This step-by-step Refine SPA tutorial will get you started in no time.",date:"2022-02-14T00:00:00.000Z",formattedDate:"February 14, 2022",tags:[{label:"refine",permalink:"/blog/tags/refine"},{label:"strapi",permalink:"/blog/tags/strapi"},{label:"chakra-ui",permalink:"/blog/tags/chakra-ui"},{label:"nextjs",permalink:"/blog/tags/nextjs"}],readingTime:10.86,hasTruncateMarker:!0,authors:[{name:"Melih Ekinci",title:"Frontend Developer",url:"https://github.com/mlhekinci",imageURL:"https://github.com/mlhekinci.png",key:"melih"}],frontMatter:{title:"Next.js E-commerce App with Strapi and Chakra UI",description:"Learn the power of Refine for e-commerce with this quick & easy example. This step-by-step Refine SPA tutorial will get you started in no time.",slug:"handcrafted-nextjs-e-commerce-app-tutorial-strapi-chakra-ui",authors:"melih",tags:["refine","strapi","chakra-ui","nextjs"],image:"https://refine.ams3.cdn.digitaloceanspaces.com/website/static/img/placeholder.png",hide_table_of_contents:!1},prevItem:{title:"Top React JS Frameworks Every Developer Should Know",permalink:"/blog/best-react-frameworks"},nextItem:{title:"Implementing Dark Mode In Ant Design Using gulp",permalink:"/blog/how-to-add-darkmode-in-ant-design"},relatedPosts:[{title:"Adding CRUD Pages",description:"We'll be adding CRUD pages for Company, Client and Contact resources in this post.",permalink:"/blog/refine-react-invoice-generator-3",formattedDate:"April 12, 2023",authors:[{name:"Abdullah Numan",title:"Fullstack Developer",url:"https://github.com/anewman15/",imageURL:"https://github.com/anewman15.png",key:"abdullah_numan"}],readingTime:26.965,date:"2023-04-12T00:00:00.000Z"},{title:"How to create React draggable components with react-dnd",description:"We'll be using the react-dnd library to create draggable components in React.",permalink:"/blog/react-draggable-components-with-react-dnd",formattedDate:"March 7, 2023",authors:[{name:"David Omotayo",title:"Frontend developer",url:"https://github.com/david4473",imageURL:"https://github.com/david4473.png",key:"david_omotayo"}],readingTime:21.255,date:"2023-03-07T00:00:00.000Z"},{title:"Pilot & refine architecture",description:"We'll be taking a look at the architecture of refine and how week of refine series will be structured.",permalink:"/blog/refine-pixels-1",formattedDate:"February 14, 2023",authors:[{name:"Abdullah Numan",title:"Fullstack Developer",url:"https://github.com/anewman15/",imageURL:"https://github.com/anewman15.png",key:"abdullah_numan"}],readingTime:10.66,date:"2023-02-14T00:00:00.000Z"}],authorPosts:[{title:"How to Create Full Stack React/Next.JS Web App in Few Hour",description:"In this article, we will learn how we can create a full-featured customizable Web / B2B application with **refine** in just a few hours.",permalink:"/blog/create-full-stack-app-with-refine",formattedDate:"April 29, 2022",authors:[{name:"Melih Ekinci",title:"Frontend Developer",url:"https://github.com/mlhekinci",imageURL:"https://github.com/mlhekinci.png",key:"melih"}],readingTime:8.09,date:"2022-04-29T00:00:00.000Z"},{title:"How to Multipart File Upload Using FormData with React Hook Form",description:"In this guide, I'm going to show you how to multipart files upload with using React Hook Form",permalink:"/blog/how-to-multipart-file-upload-with-react-hook-form",formattedDate:"March 29, 2022",authors:[{name:"Melih Ekinci",title:"Frontend Developer",url:"https://github.com/mlhekinci",imageURL:"https://github.com/mlhekinci.png",key:"melih"}],readingTime:7.075,date:"2022-03-29T00:00:00.000Z"},{title:"Refine vs AdminBro - Comparison Admin Panel Framework",description:"Refine vs AdminBro",permalink:"/blog/refine-vs-adminbro",formattedDate:"November 29, 2021",authors:[{name:"Melih Ekinci",title:"Frontend Developer",url:"https://github.com/mlhekinci",imageURL:"https://github.com/mlhekinci.png",key:"melih"}],readingTime:13.49,date:"2021-11-29T00:00:00.000Z"}]},c={authorsImageUrls:[void 0]},d=[{value:"Refine Project Setup",id:"refine-project-setup",level:2},{value:"Installation",id:"installation",level:2},{value:"Usage",id:"usage",level:2},{value:"Configure Refine for Strapi-v4",id:"configure-refine-for-strapi-v4",level:3},{value:"Chakra-UI Provider Setup",id:"chakra-ui-provider-setup",level:3},{value:"Create Strapi Collections",id:"create-strapi-collections",level:2},{value:"Create Refine Layout",id:"create-refine-layout",level:2},{value:"Product Card Design with Chakra-UI",id:"product-card-design-with-chakra-ui",level:2},{value:"Fetch Products with SSR",id:"fetch-products-with-ssr",level:2},{value:"<code>GetServerSideProps</code>",id:"getserversideprops",level:3},{value:"Create Product List with Refine",id:"create-product-list-with-refine",level:3},{value:"Adding Store-based Filtering",id:"adding-store-based-filtering",level:2},{value:"Adding Pagination",id:"adding-pagination",level:2},{value:"Adding Basket and Payment features with Snipcart",id:"adding-basket-and-payment-features-with-snipcart",level:2},{value:"Installation Snipcart Widget",id:"installation-snipcart-widget",level:3},{value:"Adding &quot;Add to Basket&quot; Button on ProductCard component",id:"adding-add-to-basket-button-on-productcard-component",level:3},{value:"Conclusion",id:"conclusion",level:2},{value:"Live Codesandbox Example",id:"live-codesandbox-example",level:2}],m={toc:d};function u(e){var{components:t}=e,n=o(e,["components"]);return(0,r.kt)("wrapper",i(function(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{},r=Object.keys(n);"function"==typeof Object.getOwnPropertySymbols&&(r=r.concat(Object.getOwnPropertySymbols(n).filter((function(e){return Object.getOwnPropertyDescriptor(n,e).enumerable})))),r.forEach((function(t){a(e,t,n[t])}))}return e}({},m,n),{components:t,mdxType:"MDXLayout"}),(0,r.kt)("admonition",{type:"caution"},(0,r.kt)("p",{parentName:"admonition"},"This post was created using version 3.x.x of ",(0,r.kt)("strong",{parentName:"p"},"refine"),". Although we plan to update it with the latest version of ",(0,r.kt)("strong",{parentName:"p"},"refine")," as soon as possible, you can still benefit from the post in the meantime."),(0,r.kt)("p",{parentName:"admonition"},"You should know that ",(0,r.kt)("strong",{parentName:"p"},"refine")," version 4.x.x is backward compatible with version 3.x.x, so there is no need to worry. If you want to see the differences between the two versions, check out the ",(0,r.kt)("a",{parentName:"p",href:"https://refine.dev/docs/migration-guide/"},"migration guide"),"."),(0,r.kt)("p",{parentName:"admonition"},"Just be aware that the source code example in this post have been updated to version 4.x.x.")),(0,r.kt)("img",{src:"https://refine.ams3.cdn.digitaloceanspaces.com/blog/2022-02-14-refine-ecommerce-blog/basket.gif",alt:"basket"}),(0,r.kt)("br",null),(0,r.kt)("p",null,"In this article, we will create the e-commerce client of our ",(0,r.kt)("a",{parentName:"p",href:"/docs/advanced-tutorials/multi-tenancy/strapi-v4"},"Strapi-Multitenancy")," admin panel that we have done before."),(0,r.kt)("p",null,"It is now used ",(0,r.kt)("strong",{parentName:"p"},"headless")," with the ",(0,r.kt)("strong",{parentName:"p"},"refine")," 3 version. You can use any UI library you want with the ",(0,r.kt)("strong",{parentName:"p"},"headless")," feature."),(0,r.kt)("p",null,"We will use ",(0,r.kt)("a",{parentName:"p",href:"https://strapi.io/"},"Strapi")," and ",(0,r.kt)("a",{parentName:"p",href:"https://chakra-ui.com/"},"Chakra-UI")," together with ",(0,r.kt)("a",{parentName:"p",href:"/docs/packages/documentation/routers/nextjs"},(0,r.kt)("strong",{parentName:"a"},"Next.js"))," in our E-commerce client example application."),(0,r.kt)("h2",{id:"refine-project-setup"},"Refine Project Setup"),(0,r.kt)("p",null,"Let's start by creating our ",(0,r.kt)("strong",{parentName:"p"},"refine")," project. You can use the ",(0,r.kt)("a",{parentName:"p",href:"https://github.com/pankod/superplate"},"superplate")," to create a refine project."),(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre",className:"language-bash"},"npm create refine-app@latest refine-ecommerce-example -- -p refine-nextjs -b v3\n")),(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre",className:"language-bash"},"\u2714 What will be the name of your app \xb7 refine-ecommerce-example\n\u2714 Package manager: \xb7 npm\n\u2714 Do you want to using UI Framework? > No(headless)\n\u2714 Data Provider: Strapi\n\u2714 i18n - Internationalization: \xb7 no\n")),(0,r.kt)("p",null,"superplate will quickly create our ",(0,r.kt)("strong",{parentName:"p"},"refine")," project according to the features we choose. Let's continue by install the ",(0,r.kt)("a",{parentName:"p",href:"/docs/packages/documentation/data-providers/strapi-v4/"},(0,r.kt)("strong",{parentName:"a"},"refine")," Strapi-v4 Data Provider")," and Chakra-UI packages that we will use later."),(0,r.kt)("h2",{id:"installation"},"Installation"),(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre",className:"language-bash"},"cd refine-ecommerce-example\n\nnpm i @refinedev/strapi-v4 @chakra-ui/react @emotion/react@^11 @emotion/styled@^11 framer-motion@^6\n")),(0,r.kt)("p",null,"Our ",(0,r.kt)("strong",{parentName:"p"},"refine")," project and installations are now ready! Let's start using it."),(0,r.kt)("h2",{id:"usage"},"Usage"),(0,r.kt)("h3",{id:"configure-refine-for-strapi-v4"},"Configure Refine for Strapi-v4"),(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre",className:"language-tsx",metastring:'title="pages/_app.tsx"',title:'"pages/_app.tsx"'},'import React from "react";\nimport { AppProps } from "next/app";\nimport Head from "next/head";\nimport { Refine } from "@refinedev/core";\nimport routerProvider from "@refinedev/nextjs-router";\n//highlight-next-line\nimport { DataProvider } from "@refinedev/strapi-v4";\n\nconst API_URL = "https://api.strapi-multi-tenant.refine.dev/api";\n\nfunction MyApp({ Component, pageProps }: AppProps): JSX.Element {\n    //highlight-next-line\n    const dataProvider = DataProvider(API_URL);\n\n    return (\n        <Refine\n            routerProvider={routerProvider}\n            //highlight-next-line\n            dataProvider={dataProvider}\n        >\n            <Component {...pageProps} />\n        </Refine>\n    );\n}\n')),(0,r.kt)("h3",{id:"chakra-ui-provider-setup"},"Chakra-UI Provider Setup"),(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre",className:"language-tsx",metastring:'title="pages/_app.tsx"',title:'"pages/_app.tsx"'},'import React from "react";\nimport { AppProps } from "next/app";\nimport Head from "next/head";\nimport { Refine } from "@refinedev/core";\nimport routerProvider from "@refinedev/nextjs-router";\nimport { DataProvider } from "@refinedev/strapi-v4";\n\n//highlight-next-line\nimport { ChakraProvider } from "@chakra-ui/react";\n\nconst API_URL = "https://api.strapi-multi-tenant.refine.dev/api";\n\nfunction MyApp({ Component, pageProps }: AppProps): JSX.Element {\n    const dataProvider = DataProvider(API_URL);\n\n    return (\n        <Refine routerProvider={routerProvider} dataProvider={dataProvider}>\n            //highlight-start\n            <ChakraProvider>\n                <Component {...pageProps} />\n            </ChakraProvider>\n            //highlight-end\n        </Refine>\n    );\n}\n')),(0,r.kt)("h2",{id:"create-strapi-collections"},"Create Strapi Collections"),(0,r.kt)("p",null,"We created three collections on Strapi as ",(0,r.kt)("inlineCode",{parentName:"p"},"store"),", ",(0,r.kt)("inlineCode",{parentName:"p"},"product")," and ",(0,r.kt)("inlineCode",{parentName:"p"},"order")," and added a relation between them. For detailed information on how to create a collection, you can check ",(0,r.kt)("a",{parentName:"p",href:"https://docs.strapi.io/developer-docs/latest/getting-started/quick-start.html"},"here"),"."),(0,r.kt)("p",null,"We created our collections in the previous Strapi Multitenancy guide. Now we will use the same collections."),(0,r.kt)("p",null,(0,r.kt)("a",{parentName:"p",href:"https://refine.dev/docs/guides-and-concepts/multi-tenancy/strapi-v4/#create-collections"},"Refer to the Project Collections for detailed information. \u2192")),(0,r.kt)("h2",{id:"create-refine-layout"},"Create Refine Layout"),(0,r.kt)("p",null,(0,r.kt)("strong",{parentName:"p"},"refine")," ",(0,r.kt)("strong",{parentName:"p"},"headless")," is not affiliated with any UI. It is entirely up to you to customize your UI. Let's create a simple layout for this example."),(0,r.kt)("p",null,"The Layout we've created now will only show the ",(0,r.kt)("strong",{parentName:"p"},"refine")," logo. In the following steps, we will edit our Layout."),(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre",className:"language-tsx",metastring:'title="components/Layout.tsx"',title:'"components/Layout.tsx"'},'import { LayoutProps } from "@refinedev/core";\nimport { Box, Container, Flex, Image } from "@chakra-ui/react";\n\nexport const Layout: React.FC<LayoutProps> = ({ children }) => {\n    return (\n        <Box\n            display={"flex"}\n            flexDirection={"column"}\n            backgroundColor={"#eeeeee"}\n            minH={"100vh"}\n        >\n            <Container maxW={"container.lg"}>\n                <Flex justify={"space-between"} mt={4} alignSelf={"center"}>\n                    <a href="https://refine.dev">\n                        <Image alt="Refine Logo" src={"./refine_logo.png"} />\n                    </a>\n                </Flex>\n                {children}\n            </Container>\n        </Box>\n    );\n};\n')),(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre",className:"language-tsx",metastring:'title="pages/_app.tsx"',title:'"pages/_app.tsx"'},'import React from "react";\nimport { AppProps } from "next/app";\nimport Head from "next/head";\nimport { Refine } from "@refinedev/core";\nimport routerProvider from "@refinedev/nextjs-router";\nimport { DataProvider } from "@refinedev/strapi-v4";\n\nimport { ChakraProvider } from "@chakra-ui/react";\n//highlight-next-line\nimport { Layout } from "src/components";\n\nconst API_URL = "https://api.strapi-multi-tenant.refine.dev/api";\n\nfunction MyApp({ Component, pageProps }: AppProps): JSX.Element {\n    const dataProvider = DataProvider(API_URL);\n\n    return (\n        <Refine\n            routerProvider={routerProvider}\n            dataProvider={dataProvider}\n            //highlight-next-line\n            Layout={Layout}\n        >\n            <ChakraProvider>\n                <Component {...pageProps} />\n            </ChakraProvider>\n        </Refine>\n    );\n}\n')),(0,r.kt)("img",{src:"https://refine.ams3.cdn.digitaloceanspaces.com/blog/2022-02-14-refine-ecommerce-blog/layout.png",alt:"layout"}),(0,r.kt)("br",null),(0,r.kt)("h2",{id:"product-card-design-with-chakra-ui"},"Product Card Design with Chakra-UI"),(0,r.kt)("p",null,"Let's design our product cards with Chakra-UI."),(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre",className:"language-tsx",metastring:'title="src/components/ProductCard.tsx"',title:'"src/components/ProductCard.tsx"'},'import React from "react";\n//highlight-next-line\nimport { Box, Image, Badge, Button } from "@chakra-ui/react";\n\nexport type ProductProps = {\n    id: string;\n    title: string;\n    description: string;\n    cardImage: string;\n};\n\nexport const ProductCard: React.FC<ProductProps> = ({\n    id,\n    title,\n    description,\n    cardImage,\n}) => {\n    return (\n        <Box maxH={"sm"} borderWidth="1px" borderRadius="lg" overflow="hidden">\n            <Image w={"100%"} h={200} src={cardImage} />\n            <Box p="6" bgColor={"gray.600"}>\n                <Box display="flex" alignItems="baseline" mb={2} ml={-2}>\n                    <Badge borderRadius="full" px="2" colorScheme="teal">\n                        New Product\n                    </Badge>\n                </Box>\n\n                <Box\n                    mt="1"\n                    fontWeight="semibold"\n                    as="h4"\n                    lineHeight="tight"\n                    noOfLines={1}\n                    color={"white"}\n                >\n                    {title}\n                </Box>\n\n                <Box color={"white"}>{}</Box>\n                <Box\n                    color="white"\n                    fontSize="sm"\n                    display={"flex"}\n                    mt={4}\n                    justifyContent={"flex-end"}\n                ></Box>\n            </Box>\n        </Box>\n    );\n};\n')),(0,r.kt)("img",{src:"https://refine.ams3.cdn.digitaloceanspaces.com/blog/2022-02-14-refine-ecommerce-blog/sample_product.png",alt:"sample_product"}),(0,r.kt)("br",null),(0,r.kt)("p",null,"We created our Product Card component. Now let's move on to the process of fetch and showing our products from the Strapi."),(0,r.kt)("h2",{id:"fetch-products-with-ssr"},"Fetch Products with SSR"),(0,r.kt)("p",null,"First, let's fetch our products with the nextjs ",(0,r.kt)("inlineCode",{parentName:"p"},"getServerSideProps")," function."),(0,r.kt)("h3",{id:"getserversideprops"},(0,r.kt)("inlineCode",{parentName:"h3"},"GetServerSideProps")),(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre",className:"language-tsx",metastring:'title="pages/index.tsx"',title:'"pages/index.tsx"'},'//highlight-next-line\nimport { GetServerSideProps } from "next";\nimport { DataProvider } from "@refinedev/strapi-v4";\n\nimport { IProduct } from "interfaces";\n\nconst API_URL = "https://api.strapi-multi-tenant.refine.dev/api";\n\n//highlight-start\nexport const getServerSideProps: GetServerSideProps = async (context) => {\n    const data = await DataProvider(API_URL).getList<IProduct>({\n        resource: "products",\n        meta: { populate: ["image"] },\n    });\n\n    return {\n        props: { products: data },\n    };\n};\n//highlight-end\n')),(0,r.kt)("h3",{id:"create-product-list-with-refine"},"Create Product List with Refine"),(0,r.kt)("p",null,"Let's process the data we fetch above using ",(0,r.kt)("strong",{parentName:"p"},"refine"),"'s ",(0,r.kt)("inlineCode",{parentName:"p"},"useTable")," hook. Then let's put our data in our ProductCard component."),(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre",className:"language-tsx",metastring:'title="pages/index.tsx"',title:'"pages/index.tsx"'},'import { GetServerSideProps } from "next";\n//highlight-next-line\nimport { LayoutWrapper, GetListResponse, useTable } from "@refinedev/core";\nimport { DataProvider } from "@refinedev/strapi-v4";\n\nimport { IProduct } from "interfaces";\nimport { SimpleGrid } from "@chakra-ui/react";\nimport { ProductCard } from "src/components";\n\nconst API_URL = "https://api.strapi-multi-tenant.refine.dev/api";\n\n//highlight-start\ntype ItemProps = {\n    products: GetListResponse<IProduct>;\n};\n//highlight-end\n\nexport const ProductList: React.FC<ItemProps> = ({ products }) => {\n    //highlight-start\n    const { tableQueryResult } = useTable<IProduct>({\n        resource: "products",\n        queryOptions: {\n            initialData: products,\n        },\n        meta: { populate: ["image"] },\n    });\n    //highlight-end\n\n    return (\n        //highlight-start\n        <LayoutWrapper>\n            <SimpleGrid columns={[1, 2, 3]} mt={6} spacing={3}>\n                {tableQueryResult.data?.data.map((item) => (\n                    <ProductCard\n                        id={item.id}\n                        title={item.title}\n                        description={item.description}\n                        cardImage={\n                            item.image\n                                ? API_URL + item.image.url\n                                : "./error.png"\n                        }\n                    />\n                ))}\n            </SimpleGrid>\n        </LayoutWrapper>\n        //highlight-end\n    );\n};\n\nexport default ProductList;\n\nexport const getServerSideProps: GetServerSideProps = async (context) => {\n    const data = await DataProvider(API_URL).getList<IProduct>({\n        resource: "products",\n        meta: { populate: ["image"] },\n    });\n\n    return {\n        props: { products: data },\n    };\n};\n')),(0,r.kt)("img",{src:"https://refine.ams3.cdn.digitaloceanspaces.com/blog/2022-02-14-refine-ecommerce-blog/products.png",alt:"products"}),(0,r.kt)("br",null),(0,r.kt)("h2",{id:"adding-store-based-filtering"},"Adding Store-based Filtering"),(0,r.kt)("p",null,"We have fetch all the products above. Now, let's fetch the stores and list the store-specific products separately."),(0,r.kt)("p",null,"First, let's fetch our stores by using the ",(0,r.kt)("strong",{parentName:"p"},"refine")," ",(0,r.kt)("inlineCode",{parentName:"p"},"useMany")," hook within the ",(0,r.kt)("inlineCode",{parentName:"p"},"getServerSideProps")," function. Next we will create buttons for the stores. When these buttons are clicked, a store is selected, we will do a filtering with ",(0,r.kt)("inlineCode",{parentName:"p"},"useTable")," ",(0,r.kt)("inlineCode",{parentName:"p"},"setFilters")," and list the products specific to that store."),(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre",className:"language-tsx",metastring:'title="pages/index.tsx"',title:'"pages/index.tsx"'},'export const getServerSideProps: GetServerSideProps = async (context) => {\n    const data = await DataProvider(API_URL).getList<IProduct>({\n        resource: "products",\n        meta: { populate: ["image"] },\n        pagination: { current: 1, pageSize: 9 },\n    });\n\n    //highlight-start\n    const { data: storesData } = await DataProvider(API_URL).getMany({\n        resource: "stores",\n        ids: ["1", "2", "3"],\n    });\n    //highlight-end\n\n    return {\n        props: {\n            products: data,\n            //highlight-next-line\n            stores: storesData,\n        },\n    };\n};\n')),(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre",className:"language-tsx",metastring:'title="pages/index.tsx"',title:'"pages/index.tsx"'},'import { GetServerSideProps } from "next";\nimport { LayoutWrapper, GetListResponse, useTable } from "@refinedev/core";\nimport { DataProvider } from "@refinedev/strapi-v4";\n\nimport { IProduct, IStore } from "interfaces";\nimport { Button, SimpleGrid, Flex, Text } from "@chakra-ui/react";\nimport { ProductCard, FilterButton } from "src/components";\n\nconst API_URL = "https://api.strapi-multi-tenant.refine.dev/api";\n\ntype ItemProps = {\n    products: GetListResponse<IProduct>;\n    //highlight-next-line\n    stores: IStore[];\n};\n\nexport const ProductList: React.FC<ItemProps> = ({ products, stores }) => {\n    const { tableQueryResult, setFilters } = useTable<IProduct>({\n        resource: "products",\n        queryOptions: {\n            initialData: products,\n        },\n        meta: { populate: ["image"] },\n    });\n\n    return (\n        <LayoutWrapper>\n            //highlight-start\n            <Flex mt={6} gap={2}>\n                <FilterButton\n                    setFilters={() =>\n                        setFilters([\n                            {\n                                field: "stores][id]",\n                                operator: "eq",\n                                value: undefined,\n                            },\n                        ])\n                    }\n                >\n                    <Text fontSize={{ base: "12px", md: "14px", lg: "14px" }}>\n                        All Products\n                    </Text>\n                </FilterButton>\n                {stores?.map((item) => {\n                    return (\n                        <FilterButton\n                            setFilters={() =>\n                                setFilters([\n                                    {\n                                        field: "stores][id]",\n                                        operator: "eq",\n                                        value: item.id,\n                                    },\n                                ])\n                            }\n                        >\n                            <Text\n                                fontSize={{\n                                    base: "12px",\n                                    md: "14px",\n                                    lg: "14px",\n                                }}\n                            >\n                                {item.title}\n                            </Text>\n                        </FilterButton>\n                    );\n                })}\n            </Flex>\n            //highlight-end\n            <SimpleGrid columns={[1, 2, 3]} mt={6} spacing={3}>\n                {tableQueryResult.data?.data.map((item) => (\n                    <ProductCard\n                        id={item.id}\n                        title={item.title}\n                        description={item.description}\n                        cardImage={\n                            item.image\n                                ? API_URL + item.image.url\n                                : "./error.png"\n                        }\n                    />\n                ))}\n            </SimpleGrid>\n        </LayoutWrapper>\n    );\n};\n\nexport default ProductList;\n\nexport const getServerSideProps: GetServerSideProps = async (context) => {\n    const data = await DataProvider(API_URL).getList<IProduct>({\n        resource: "products",\n        meta: { populate: ["image"] },\n        pagination: { current: 1, pageSize: 9 },\n    });\n\n    const { data: storesData } = await DataProvider(API_URL).getMany({\n        resource: "stores",\n        ids: ["1", "2", "3"],\n    });\n\n    return {\n        props: {\n            products: data,\n            stores: storesData,\n        },\n    };\n};\n')),(0,r.kt)("img",{src:"https://refine.ams3.cdn.digitaloceanspaces.com/blog/2022-02-14-refine-ecommerce-blog/pagination.gif",alt:"pagination"}),(0,r.kt)("br",null),(0,r.kt)("h2",{id:"adding-pagination"},"Adding Pagination"),(0,r.kt)("p",null,"We list all products on our ",(0,r.kt)("inlineCode",{parentName:"p"},"All Products")," page. Let's add pagination to this page and divide the products into pages. We will perform pagination using the ",(0,r.kt)("inlineCode",{parentName:"p"},"pageSize"),", ",(0,r.kt)("inlineCode",{parentName:"p"},"current")," and setCurrent properties from the useTable hook."),(0,r.kt)("p",null,(0,r.kt)("a",{parentName:"p",href:"https://refine.dev/docs/core/hooks/useTable/#pagination"},"Refer to the useTable documentation for detailed information. \u2192")),(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre",className:"language-tsx",metastring:'title="pages/index.tsx"',title:'"pages/index.tsx"'},'import { GetServerSideProps } from "next";\nimport { LayoutWrapper, GetListResponse, useTable } from "@refinedev/core";\nimport { DataProvider } from "@refinedev/strapi-v4";\n\nimport { IProduct, IStore } from "interfaces";\nimport { Button, SimpleGrid, Flex, Text } from "@chakra-ui/react";\nimport { ProductCard, FilterButton } from "src/components";\n\nconst API_URL = "https://api.strapi-multi-tenant.refine.dev/api";\n\ntype ItemProps = {\n    products: GetListResponse<IProduct>;\n    stores: IStore[];\n};\n\nexport const ProductList: React.FC<ItemProps> = ({ products, stores }) => {\n    //highlight-start\n    const { tableQueryResult, setFilters, current, setCurrent, pageSize } =\n        useTable<IProduct>({\n            resource: "products",\n            queryOptions: {\n                initialData: products,\n            },\n            initialPageSize: 9,\n            meta: { populate: ["image"] },\n        });\n    //highlight-end\n\n    //highlight-next-line\n    const totalPageCount = Math.ceil(tableQueryResult.data?.total!! / pageSize);\n\n    return (\n        <LayoutWrapper>\n            <Flex mt={6} gap={2}>\n                <FilterButton\n                    setFilters={() =>\n                        setFilters([\n                            {\n                                field: "stores][id]",\n                                operator: "eq",\n                                value: undefined,\n                            },\n                        ])\n                    }\n                >\n                    <Text fontSize={{ base: "12px", md: "14px", lg: "14px" }}>\n                        All Products\n                    </Text>\n                </FilterButton>\n                {stores?.map((item) => {\n                    return (\n                        <FilterButton\n                            setFilters={() =>\n                                setFilters([\n                                    {\n                                        field: "stores][id]",\n                                        operator: "eq",\n                                        value: item.id,\n                                    },\n                                ])\n                            }\n                        >\n                            <Text\n                                fontSize={{\n                                    base: "12px",\n                                    md: "14px",\n                                    lg: "14px",\n                                }}\n                            >\n                                {item.title}\n                            </Text>\n                        </FilterButton>\n                    );\n                })}\n            </Flex>\n            <SimpleGrid columns={[1, 2, 3]} mt={6} spacing={3}>\n                {tableQueryResult.data?.data.map((item) => (\n                    <ProductCard\n                        id={item.id}\n                        title={item.title}\n                        description={item.description}\n                        cardImage={\n                            item.image\n                                ? API_URL + item.image.url\n                                : "./error.png"\n                        }\n                    />\n                ))}\n            </SimpleGrid>\n            //highlight-start\n            <Flex justify={"flex-end"} mt={4} mb={4} gap={2}>\n                {Array.from(Array(totalPageCount), (e, i) => {\n                    if (current > totalPageCount) {\n                        setCurrent(i);\n                    }\n                    return (\n                        <Button\n                            colorScheme={"teal"}\n                            onClick={() => setCurrent(i + 1)}\n                        >\n                            {"Page: " + (i + 1)}\n                        </Button>\n                    );\n                })}\n            </Flex>\n            //highlight-end\n        </LayoutWrapper>\n    );\n};\n\nexport default ProductList;\n\nexport const getServerSideProps: GetServerSideProps = async (context) => {\n    const data = await DataProvider(API_URL).getList<IProduct>({\n        resource: "products",\n        meta: { populate: ["image"] },\n        pagination: { current: 1, pageSize: 9 },\n    });\n\n    const { data: storesData } = await DataProvider(API_URL).getMany({\n        resource: "stores",\n        ids: ["1", "2", "3"],\n    });\n\n    return {\n        props: { products: data, stores: storesData },\n    };\n};\n')),(0,r.kt)("img",{src:"https://refine.ams3.cdn.digitaloceanspaces.com/blog/2022-02-14-refine-ecommerce-blog/page_size.gif",alt:"page_size"}),(0,r.kt)("br",null),(0,r.kt)("h2",{id:"adding-basket-and-payment-features-with-snipcart"},"Adding Basket and Payment features with Snipcart"),(0,r.kt)("p",null,"One of the steps that should be in an E-commerce application is the cart and payment transactions. In our example, we will use ",(0,r.kt)("a",{parentName:"p",href:"https://snipcart.com/"},"Snipcart")," for this process."),(0,r.kt)("p",null,(0,r.kt)("a",{parentName:"p",href:"https://docs.snipcart.com/v3/"},"Refer to the Snipcart documentation for detailed information. \u2192")),(0,r.kt)("h3",{id:"installation-snipcart-widget"},"Installation Snipcart Widget"),(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre",className:"language-tsx",metastring:'title="pages/_app.tsx"',title:'"pages/_app.tsx"'},'function MyApp({ Component, pageProps }: AppProps): JSX.Element {\n    const dataProvider = DataProvider(API_URL);\n\n    return (\n        <>\n            //highlight-start\n            <Head>\n                <link rel="preconnect" href="https://app.snipcart.com" />\n                <link\n                    rel="stylesheet"\n                    href="https://cdn.snipcart.com/themes/v3.0.16/default/snipcart.css"\n                />\n                <script\n                    async\n                    src="https://cdn.snipcart.com/themes/v3.0.16/default/snipcart.js"\n                />\n            </Head>\n            //highlight-end\n            <Refine\n                routerProvider={routerProvider}\n                dataProvider={dataProvider}\n                resources={[{ name: "products" }]}\n                Layout={Layout}\n            >\n                <ChakraProvider>\n                    <Component {...pageProps} />\n                </ChakraProvider>\n            </Refine>\n            //highlight-start\n            <div hidden id="snipcart" data-api-key="YOUR_SNIPCART_TEST_KEY" />\n            //highlight-end\n        </>\n    );\n}\n')),(0,r.kt)("h3",{id:"adding-add-to-basket-button-on-productcard-component"},'Adding "Add to Basket" Button on ProductCard component'),(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre",className:"language-tsx",metastring:'title="src/components/ProductCard.tsx"',title:'"src/components/ProductCard.tsx"'},'import React from "react";\nimport { Box, Image, Badge, Button } from "@chakra-ui/react";\n\nexport type ProductProps = {\n    id: string;\n    title: string;\n    description: string;\n    cardImage: string;\n};\n\nexport const ProductCard: React.FC<ProductProps> = ({\n    id,\n    title,\n    description,\n    cardImage,\n}) => {\n    return (\n        <Box\n            maxH={"sm"}\n            maxW="sm"\n            borderWidth="1px"\n            borderRadius="lg"\n            overflow="hidden"\n        >\n            <Image w={"100%"} h={200} src={cardImage} />\n            <Box p="6" bgColor={"gray.600"}>\n                <Box display="flex" alignItems="baseline" mb={2} ml={-2}>\n                    <Badge borderRadius="full" px="2" colorScheme="teal">\n                        New Product\n                    </Badge>\n                </Box>\n\n                <Box\n                    mt="1"\n                    fontWeight="semibold"\n                    as="h4"\n                    lineHeight="tight"\n                    noOfLines={1}\n                    color={"white"}\n                >\n                    {title}\n                </Box>\n                <Box\n                    color="white"\n                    fontSize="sm"\n                    display={"flex"}\n                    mt={4}\n                    justifyContent={"flex-end"}\n                >\n                    //highlight-start\n                    <Button\n                        className="buy-button snipcart-add-item"\n                        bgColor={"green.400"}\n                        data-item-id={id}\n                        data-item-price="5"\n                        data-item-url="/"\n                        data-item-name={title}\n                        data-item-description={description}\n                        data-item-image={cardImage}\n                    >\n                        Add to Basket\n                    </Button>\n                    //highlight-end\n                </Box>\n            </Box>\n        </Box>\n    );\n};\n')),(0,r.kt)("img",{src:"https://refine.ams3.cdn.digitaloceanspaces.com/blog/2022-02-14-refine-ecommerce-blog/basket.gif",alt:"basket"}),(0,r.kt)("br",null),(0,r.kt)("h2",{id:"conclusion"},"Conclusion"),(0,r.kt)("p",null,"One of the biggest features that distinguishes ",(0,r.kt)("strong",{parentName:"p"},"refine")," from other frameworks is that it is customizable. Combined with ",(0,r.kt)("strong",{parentName:"p"},"refine")," ",(0,r.kt)("strong",{parentName:"p"},"headless"),", it now provides more customization options. This provides a great deal of convenience in the project you will develop."),(0,r.kt)("p",null,"As you can see in this article, we have developed the Client part of our ",(0,r.kt)("a",{parentName:"p",href:"https://refine.dev/docs/guides-and-concepts/multi-tenancy/strapi-v4/"},"Admin Panel"),", which we have done before, with ",(0,r.kt)("strong",{parentName:"p"},"refine"),". ",(0,r.kt)("strong",{parentName:"p"},"refine")," offers the opportunity to develop B2B and B2C applications without any restrictions and in a fully customizable manner."),(0,r.kt)("p",null,(0,r.kt)("a",{parentName:"p",href:"https://refine.dev/docs/guides-and-concepts/multi-tenancy/strapi-v4/"},"Refer to the Admin side of the project \u2192")),(0,r.kt)("h2",{id:"live-codesandbox-example"},"Live Codesandbox Example"),(0,r.kt)("iframe",{src:"https://codesandbox.io/embed/refine-ecommerce-example-9rvzv?autoresize=1&fontsize=14&theme=dark&view=preview",style:{width:"100%",height:"80vh",border:"0px",borderRadius:"8px",overflow:"hidden"},title:"refine-ecommerce-example",allow:"accelerometer; ambient-light-sensor; camera; encrypted-media; geolocation; gyroscope; hid; microphone; midi; payment; usb; vr; xr-spatial-tracking",sandbox:"allow-forms allow-modals allow-popups allow-presentation allow-same-origin allow-scripts"}))}u.isMDXComponent=!0}}]);